#:import C kivy.utils.get_color_from_hex
<TooltipMDIconButton@MDFloatingActionButton+MDTooltip>
<TooltipMDOnlyIconButton@MDIconButton+MDTooltip>

<StraightWireHorizontal>:
    topmost: topmost
    BoxLayout:
        id:topmost
        orientation:"vertical"
        size_hint:(None,None)
        height:10
        width: 100

        canvas.before:
            Color:

                rgba : [0,0,0,0]             #app.left_tray_color
            RoundedRectangle:
                radius: [8,8,8,8]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(1,None)
            height:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,8,8,8]
                            pos: self.parent.pos
                            size:self.size

<StraightWireVertical>:
    topmost: topmost
    BoxLayout:
        id:topmost
        size_hint:(None,None)
        height:100
        width: 10

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,8,8,8]
                            pos: self.parent.pos
                            size:self.size

<CShapedWireTop>:
    topmost: topmost
    BoxLayout:
        id:topmost
        orientation:"vertical"
        size_hint:(None,None)
        height:40
        width: 100

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,8,0,0]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(1,None)
            height:10
            DraggableWire:

                BoxLayout:



                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,8,0,0]
                            pos: self.parent.pos
                            size:self.size
        BoxLayout:
            DraggableWire:
                size_hint_x:None
                width:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [0,0,8,8]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)
            DraggableWire:
                size_hint_x:None
                width:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,0,8,8]
                            pos: self.pos
                            size:self.size
<CShapedWireBottom>:
    topmost: topmost
    BoxLayout:
        id:topmost
        orientation:"vertical"
        size_hint:(None,None)
        height:40
        width: 100

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [0,0,8,8]

                size: self.size
                pos: self.pos


        BoxLayout:
            DraggableWire:
                size_hint_x:None
                width:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [8,8,0,0]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)
            DraggableWire:
                size_hint_x:None
                width:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,8,0,0]
                            pos: self.pos
                            size:self.size
        BoxLayout:
            size_hint:(1,None)
            height:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,0,8,8]
                            pos: self.parent.pos
                            size:self.size
<CShapedWireLeft>:
    topmost: topmost
    BoxLayout:
        id:topmost
        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.parent.pos
                            size:self.size
        BoxLayout:
            orientation:"vertical"
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.pos
                            size:self.size
<CShapedWireRight>:
    topmost: topmost
    BoxLayout:
        id:topmost
        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos
        BoxLayout:
            orientation:"vertical"
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.pos
                            size:self.size

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.parent.pos
                            size:self.size
<ElbowShapedUpperRightWire>:
    topmost: topmost
    BoxLayout:
        id:topmost

        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos
        BoxLayout:
            orientation:"vertical"
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)


        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.parent.pos
                            size:self.size

<ElbowShapedUpperLeftWire>:
    topmost: topmost
    BoxLayout:
        id: topmost
        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.parent.pos
                            size:self.size
        BoxLayout:
            orientation:"vertical"
            DraggableWire:
                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.pos
                            size:self.size
            BoxLayout:
                size_hint:(1,1)
<ElbowShapedLowerLeftWire>:
    topmost: topmost

    BoxLayout:
        id:topmost
        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:

                    height: 20
                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.parent.pos
                            size:self.size
        BoxLayout:
            orientation:"vertical"

            BoxLayout:
                size_hint:(1,1)
            DraggableWire:

                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.pos
                            size:self.size
<ElbowShapedLowerRightWire>:
    topmost: topmost
    BoxLayout:
        id: topmost
        size_hint:(None,None)
        height:100
        width: 40

        canvas.before:
            Color:

                rgba : [0,0,0,0]
            RoundedRectangle:
                radius: [8,0,8,0]

                size: self.size
                pos: self.pos
        BoxLayout:
            orientation:"vertical"

            BoxLayout:
                size_hint:(1,1)
            DraggableWire:

                size_hint_y:None
                height:10
                BoxLayout:


                    canvas.before:
                        Color:

                            rgba : C("#ec4646")                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [8,0,0,8]
                            pos: self.pos
                            size:self.size

        BoxLayout:
            size_hint:(None,1)
            width:10
            DraggableWire:

                BoxLayout:


                    canvas.before:
                        Color:
                            id:color

                            rgba : C("#ec4646")                 #app.left_tray_color                                              #app.theme_cls.bg_normal
                        RoundedRectangle:
                            radius: [0,8,8,0]
                            pos: self.parent.pos
                            size:self.size
<TouchableWire>:


    drag_rectangle: self.x, self.y, self.width,self.height
    drag_timeout: 1000000
    drag_distance: 0

<WireBase>:

    external_container: external_container
    BoxLayout:
        id: external_container







<DraggableImageButtonWithDoubleTouch>:
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0
<UpperUtilityTray>:

    BoxLayout:

        size_hint_x: None
        pos_hint: {'center_x': .5, 'center_y': .5}
        size_hint_y:1
        width: self.minimum_width
        canvas.before:
            Color:

                rgba :  app.upper_utilitytray_color
            Line:
                width: 2

                rectangle: self.x, self.y, self.width, self.height
        GridLayout:
            rows:2
            cols:4
            row_force_default: True
            row_default_height: 45
            size_hint_x: None
            width: self.minimum_width






            TooltipMDOnlyIconButton:
                icon:"arrow-expand-vertical"
                on_release: app.page_size_increaser(self)
                tooltip_text:"expand page vertically"
            TooltipMDOnlyIconButton:
                icon:"format-color-fill"
                tooltip_text:"wire color"
                on_release: app.color_chooser()

            TooltipMDOnlyIconButton:
                icon:"rotate-right"
                tooltip_text:"rotate image right"
                on_release: app.rotate_image_right()
            TooltipMDOnlyIconButton:
                icon:"rotate-left"
                tooltip_text:"rotate image left"
                on_release:app.rotate_image_left()
            TooltipMDOnlyIconButton:
                icon:"image"
                tooltip_text:"convert to image"
                on_release: app.convert_to_png(self)
            TooltipMDOnlyIconButton:
                icon:"theme-light-dark"
                tooltip_text:"theme"
                on_release: app.application_look_settings(self)

            TooltipMDOnlyIconButton:
                icon:"pipe-disconnected"
                tooltip_text:"dislocate image"
                theme_text_color: "Primary"
                spacing:20
                on_release: app.dragfunctionality(self)

            TooltipMDOnlyIconButton:
                icon:"rotate-3d-variant"
                tooltip_text:"image rotation"
                on_release: app.rotation_enabler(self)


<LeftTrayButton@MDRaisedButton>:
    pos_hint: {"center_x": 1.5, "center_y": .5}
    markup:True
    font_name:"pacifico"
    font_size:15
    size_hint:(2.5,0.1)
<BuilderWindow>:
    openbutton:openbutton
    container:container
    upperutilitytray: upperutilitytray
    addwiresbutton:addwiresbutton
    savebutton:savebutton
    basiceqbutton:basiceqbutton
    sensorsbutton:sensorsbutton
    MDBoxLayout:
        orientation: "vertical"

        MDToolbar:

            title: "ArduinoBuild"

            left_action_items: [["robot", lambda x: app.callback()]]
            right_action_items: [["lock", lambda x: app.callback()],["dots-vertical", lambda x: app.callback()]]
            md_bg_color:C('#00917c')                                            #9dad7f

        BoxLayout:
            orientation:"horizontal"
            padding:[0,20,0,20]
            BoxLayout:

                color_of_canvas: app.left_tray_color
                orientation:"vertical"
                spacing:40
                padding:[0,20,0,20]
                size_hint:(0.03,1)

                canvas.before:
                    Color:

                        rgba :  app.left_tray_color
                    Rectangle:

                        pos: self.pos
                        size:self.size
                LeftTrayButton:
                    id: openbutton
                    text:"Open"
                    on_release: app.open_saved_file()

                LeftTrayButton:
                    id:savebutton
                    text:"Save"
                    on_release:app.save_data()

                LeftTrayButton:
                    id: basiceqbutton
                    on_release: app.basic_equipments_menu.open()
                    text:"Basic eq."

                LeftTrayButton:
                    id: sensorsbutton
                    text:"Sensors"
                    on_release: app.sensors_menu.open()
                LeftTrayButton:
                    id:addwiresbutton
                    text:"Wires"
                    on_release:app.wires_menu.open()




                BoxLayout:

            BoxLayout:
                orientation:"vertical"
                BoxLayout:
                    size_hint:(1,0.2)
                    padding:20
                    spacing:30
                    BoxLayout:

                    BoxLayout:
                        orientation:"vertical"
                        size_hint:(0.3,1)

                        canvas.before:
                            Color:

                                rgba :  app.upper_utilitytray_color
                            Line:
                                width: 1.5

                                rectangle: self.x, self.y, self.width, self.height
                        AnchorLayout:
                            padding:[15,30,15,15]

                            TooltipMDOnlyIconButton:
                                icon:"arrow-expand-vertical"
                                tooltip_text:"wire vertical dimension"
                                user_font_size: "35sp"
                                anchor_x:"center"
                                anchor_y:"center"

                        BoxLayout:

                            TooltipMDOnlyIconButton:
                                icon:"plus"
                                tooltip_text:"increase"
                                on_release: app.wire_extender_vertically()
                            TooltipMDOnlyIconButton:
                                icon:"minus"
                                tooltip_text:"decrease"
                                on_release: app.wire_shrinker_vertically()
                    BoxLayout:
                        orientation:"vertical"
                        size_hint:(0.3,1)

                        canvas.before:
                            Color:

                                rgba :  app.upper_utilitytray_color
                            Line:
                                width: 1.5

                                rectangle: self.x, self.y, self.width, self.height
                        AnchorLayout:
                            padding:[0,15,0,0]

                            TooltipMDOnlyIconButton:
                                icon:"arrow-expand-horizontal"
                                tooltip_text:"wire horizontal dimension"
                                user_font_size: "35sp"
                                anchor_x:"center"
                                anchor_y:"center"

                        BoxLayout:
                            TooltipMDOnlyIconButton:
                                icon:"plus"
                                tooltip_text:"increase"
                                on_release: app.wire_extender_horizontally()
                            TooltipMDOnlyIconButton:
                                icon:"minus"
                                tooltip_text:"decrease"
                                on_release: app.wire_shrinker_horizontally()
                    UpperUtilityTray:
                        id: upperutilitytray

                    #MDRoundFlatButton:
                        #text: "Images on Workarea:  1"
                        #pos_hint: {"center_x": .5, "center_y": .5}
                        #theme_text_color: "Custom"
                        #text_color: rgba("#2DA8D8FF")

                        #md_bg_color: C("#726a95")
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        tooltip_text: "clear selected item"
                        icon:"tray-remove"
                        on_release: app.clear_selected_widget()
                        md_bg_color: C("#70af85")
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"eraser"
                        tooltip_text: self.icon
                        md_bg_color: app.theme_cls.primary_color
                        on_release: app.remove_selected_widget()
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"clipboard-plus"
                        tooltip_text: "new page"
                        on_release: app.new_page()
                        md_bg_color: app.theme_cls.primary_color
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"delete"
                        tooltip_text: self.icon
                        md_bg_color: C("#f05454")
                        on_release: app.yes_clear_page()

                BoxLayout:
                    size_hint:(1,1)
                    padding:[90,20,10,7]

                    border:[25,25,25,25]

                    ScrollView:
                        bar_color : app.bar_color
                        bar_width: 7
                        canvas.before:
                            Color:

                                rgba : app.workspace_boundary_color
                            Line:
                                width: 6

                                rectangle: self.x, self.y, self.width, self.height

                        FloatLayout:



                            size:(self.parent.width,self.parent.height)
                            id:container
                            orientation: "vertical"
                            size_hint_y: None

                            #height: self.minimum_height  #<<<<<<<<<<<<<<<<<<<<
                            #row_default_height: 1600
                            canvas.before:
                                Color:

                                    rgba :  app.left_tray_color
                                Rectangle:

                                    pos: self.pos
                                    size:self.size


