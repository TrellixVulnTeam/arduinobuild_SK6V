#:import C kivy.utils.get_color_from_hex
<TooltipMDIconButton@MDFloatingActionButton+MDTooltip>
<TooltipMDOnlyIconButton@MDIconButton+MDTooltip>


<DraggableImageButtonWithDoubleTouch>:
    # Define the properties for the DragLabel
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0
<UpperUtilityTray>:
    BoxLayout:

        size_hint_x: None
        pos_hint: {'center_x': .5, 'center_y': .5}
        size_hint_y:1
        width: self.minimum_width
        canvas.before:
            Color:

                rgba :  app.upper_utilitytray_color
            Line:
                width: 2

                rectangle: self.x, self.y, self.width, self.height
        GridLayout:
            rows:2
            cols:8
            row_force_default: True
            row_default_height: 45
            size_hint_x: None
            width: self.minimum_width






            TooltipMDOnlyIconButton:
                icon:"arrow-expand-vertical"
                on_release: app.page_size_increaser(self)
                tooltip_text:"expand page vertically"
            TooltipMDOnlyIconButton:
                icon:"format-color-fill"
                tooltip_text:"pencil color"
            TooltipMDOnlyIconButton:
                icon:"undo"
                tooltip_text:"undo"
            TooltipMDOnlyIconButton:
                icon:"redo"
                tooltip_text:"redo"
            TooltipMDOnlyIconButton:
                icon:"rotate-right"
                tooltip_text:"rotate image right"
                on_release: app.rotate_image_right()
            TooltipMDOnlyIconButton:
                icon:"rotate-left"
                tooltip_text:"rotate image left"
                on_release:app.rotate_image_left()
            TooltipMDOnlyIconButton:
                icon:"image"
                tooltip_text:"convert to image"
                on_release: app.convert_to_png(self)
            TooltipMDOnlyIconButton:
                icon:"lightbulb-on-outline"
                tooltip_text:"dark mode"
                on_release: app.application_look_settings(self)
            TooltipMDOnlyIconButton:
                icon:"volume-high"
                tooltip_text:"dark mode"
            TooltipMDOnlyIconButton:
                icon:"pipe-disconnected"
                tooltip_text:"dislocate image"
                theme_text_color: "Primary"

                on_release: app.dragfunctionality(self)
            TooltipMDOnlyIconButton:
                icon:"rotate-3d-variant"
                tooltip_text:"image rotation"
                on_release: app.rotation_enabler(self)
<PencilSizeChanger>:
    BoxLayout:
        size_hint:(None,1)
        width:170
        canvas.before:
            Color:

                rgba :  rgba("#FFFFFF")
            Rectangle:

                pos: self.pos
                size:self.size
        MDIconButton:
            icon:"minus"
        Label:

            bold:True
            color: C("#0a043c")
            text:"Pencil Size:1"
        MDIconButton:
            icon:"plus"


<LeftTrayButton@MDRaisedButton>:
    pos_hint: {"center_x": 1.5, "center_y": .5}
    markup:True
    font_name:"pacifico"
    font_size:15
    size_hint:(2.5,0.1)
<BuilderWindow>:
    openbutton:openbutton
    container:container

    additionalmodulesbutton:additionalmodulesbutton
    savebutton:savebutton
    basiceqbutton:basiceqbutton
    sensorsbutton:sensorsbutton
    MDBoxLayout:
        orientation: "vertical"

        MDToolbar:

            title: "ArduinoBuild"

            left_action_items: [["robot", lambda x: app.callback()]]
            right_action_items: [["lock", lambda x: app.callback()],["dots-vertical", lambda x: app.callback()]]
            md_bg_color:C('#00917c')                                            #9dad7f

        BoxLayout:
            orientation:"horizontal"
            padding:[0,20,0,20]
            BoxLayout:

                color_of_canvas: app.left_tray_color
                orientation:"vertical"
                spacing:40
                padding:[0,20,0,20]
                size_hint:(0.03,1)

                canvas.before:
                    Color:

                        rgba :  app.left_tray_color
                    Rectangle:

                        pos: self.pos
                        size:self.size
                LeftTrayButton:
                    id: openbutton
                    text:"Open"
                    on_release: app.menu.open()

                LeftTrayButton:
                    id:savebutton
                    text:"Save"
                    on_release:app.image_adder()

                LeftTrayButton:
                    id: basiceqbutton

                    text:"[size=30]+[/size] Basic eq."

                LeftTrayButton:
                    id: sensorsbutton
                    text:"[size=30]+[/size] Sensors"

                LeftTrayButton:
                    id:additionalmodulesbutton
                    text:"more modules"




                BoxLayout:

            BoxLayout:
                orientation:"vertical"
                BoxLayout:
                    size_hint:(1,0.2)
                    padding:20
                    spacing:30
                    BoxLayout:

                    UpperUtilityTray:
                    MDSpinner:
                        size_hint: None, None
                        size: dp(46), dp(46)
                        pos_hint: {'center_x': .5, 'center_y': .5}
                        active: True
                    MDRoundFlatButton:
                        text: "Images on Workarea:  1"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        theme_text_color: "Custom"
                        text_color: rgba("#2DA8D8FF")

                        #md_bg_color: C("#726a95")
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        tooltip_text: self.icon
                        icon:"pencil"
                        md_bg_color: C("#70af85")
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"eraser"
                        tooltip_text: self.icon
                        md_bg_color: app.theme_cls.primary_color

                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"clipboard-plus"
                        tooltip_text: "new page"
                        md_bg_color: app.theme_cls.primary_color
                    TooltipMDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .5}
                        icon:"delete"
                        tooltip_text: self.icon
                        md_bg_color: C("#f05454")

                BoxLayout:
                    size_hint:(1,1)
                    padding:[90,20,10,7]

                    border:[25,25,25,25]

                    ScrollView:
                        bar_color : app.bar_color
                        bar_width: 7
                        canvas.before:
                            Color:

                                rgba : app.workspace_boundary_color
                            Line:
                                width: 2

                                rectangle: self.x, self.y, self.width, self.height

                        FloatLayout:


                            size:(self.parent.width,self.parent.height)
                            id:container
                            orientation: "vertical"
                            size_hint_y: None

                            #height: self.minimum_height  #<<<<<<<<<<<<<<<<<<<<
                            row_default_height: 1600


